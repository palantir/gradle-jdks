apply plugin: 'java'
apply plugin: 'org.unbroken-dome.test-sets'

testSets {
    jdkIntegrationTest
}

dependencies {
    jdkIntegrationTestImplementation project(":gradle-jdks")
    jdkIntegrationTestImplementation project(":gradle-jdks-certs")

    jdkIntegrationTestImplementation 'commons-io:commons-io'
    jdkIntegrationTestImplementation 'com.google.guava:guava'
    jdkIntegrationTestImplementation 'org.junit.jupiter:junit-jupiter'
    jdkIntegrationTestImplementation 'org.assertj:assertj-core'
}

tasks.build.dependsOn tasks.jdkIntegrationTest
tasks.jdkIntegrationTest {
    dependsOn project(":gradle-jdks-certs").tasks.fatJar
    environment("PROJECT_VERSION", project.version)
}
